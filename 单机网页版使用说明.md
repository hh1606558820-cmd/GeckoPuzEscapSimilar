# 单机网页版使用说明

## 快速打包

### Windows 用户

直接双击运行 `package-offline.bat`，脚本会自动：
1. 构建生产版本
2. 检查必要文件
3. 创建 ZIP 压缩包

打包完成后，会在项目根目录生成 `level-editor-offline-YYYYMMDD.zip` 文件。

### Linux/Mac 用户

在终端中运行：
```bash
chmod +x package-offline.sh
./package-offline.sh
```

## 使用方法

### 1. 解压 ZIP 文件

将生成的 ZIP 文件解压到任意目录（例如：`C:\level-editor\` 或 `~/level-editor/`）

### 2. 打开编辑器（推荐方法）

**直接双击打开**（无需服务器）：
- 双击 `index.html` 文件
- 浏览器会自动打开关卡编辑器
- 开始使用！

### 3. 备用方法（如果直接打开不行）

如果直接双击 `index.html` 出现白屏或错误，可以使用本地服务器：

**Windows 用户**：
- 双击 `start.bat` 文件
- 等待服务器启动（会显示 "Local: http://localhost:3000"）
- 在浏览器中打开 `http://localhost:3000`

**Linux/Mac 用户**：
- 在终端中运行：
  ```bash
  chmod +x start.sh
  ./start.sh
  ```
- 等待服务器启动后，在浏览器中打开 `http://localhost:3000`

## 停止服务器

在命令行窗口中按 `Ctrl+C` 停止服务器。

## 注意事项

1. **推荐方法**：直接双击 `index.html` 打开，无需启动服务器，现代浏览器支持在 file:// 协议下运行。

2. **浏览器要求**：支持现代浏览器（Chrome 111+、Firefox 114+、Edge 111+、Safari 16.4+）。

3. **备用方法**：如果直接打开出现白屏或 CORS 错误，可以使用 `start.bat` 或 `start.sh` 启动本地服务器：
   - 首次运行 `start.bat` 或 `start.sh` 时，`npx` 会自动下载 `serve` 工具（需要网络连接）
   - 之后运行就无需网络了
   - 如果端口 3000 被占用，可以编辑脚本将端口号改为其他值（如 3001、8080 等）

## 文件结构

打包后的 ZIP 文件包含以下内容：

```
level-editor-offline-YYYYMMDD.zip
├── index.html              # 主页面（可以直接双击打开）
├── assets/                 # 资源文件目录
│   ├── index.js           # JavaScript 文件
│   └── index.css          # CSS 样式文件
├── start.bat              # Windows 启动脚本（备用方法）
├── start.sh               # Linux/Mac 启动脚本（备用方法）
├── README_OFFLINE.txt     # 离线使用说明
└── 使用说明.txt           # 快速使用说明
```

## 技术说明

- 项目已配置 `base: './'`，使用相对路径，支持离线使用
- 现代浏览器支持在 file:// 协议下加载 ES 模块，可以直接双击打开
- 所有资源文件都已打包，无需网络连接即可运行
- 如果遇到 CORS 错误，可以使用 `npx serve` 提供本地静态服务器（备用方法）

## 常见问题

**Q: 可以直接双击 index.html 打开吗？**  
A: 可以！现代浏览器（Chrome 111+、Firefox 114+、Edge 111+、Safari 16.4+）支持在 file:// 协议下加载 ES 模块，可以直接双击打开。如果遇到问题，可以使用 `start.bat` 启动本地服务器作为备用方法。

**Q: 如何修改端口号？**  
A: 编辑 `start.bat`（Windows）或 `start.sh`（Linux/Mac），将 `-p 3000` 改为其他端口号，如 `-p 8080`。

**Q: 打包后的文件可以分享给其他人吗？**  
A: 可以！将 ZIP 文件分享给其他人，他们解压后按照上述步骤操作即可使用，无需安装任何软件（除了浏览器）。

**Q: 首次运行需要网络吗？**  
A: 首次运行 `start.bat` 或 `start.sh` 时，`npx` 需要下载 `serve` 工具，需要网络连接。下载完成后，之后运行就无需网络了。
